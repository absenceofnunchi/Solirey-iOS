//
//  SimplePaymentABI.swift
//  NFTrack-Firebase4
//
//  Created by J C on 2021-10-09.
//

/*
 Abstract:
 To be used for the first time sale of both tangible and digital. It's also to be used for the resale of a tangible item. The resale of a digital item should be used with SimplePaymentWithRoyalty.
 */

import Foundation
import web3swift

let adminAddress = EthereumAddress("0x6879f0A123056B5Bb56c7E787cF64A67f3a16a71")

let simplePaymentABI = """
[
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_price",
                "type": "uint256"
            },
            {
                "internalType": "address payable",
                "name": "_admin",
                "type": "address"
            }
        ],
        "stateMutability": "payable",
        "type": "constructor"
    },
    {
        "anonymous": false,
        "inputs": [
            {
                "indexed": false,
                "internalType": "address",
                "name": "payer",
                "type": "address"
            },
            {
                "indexed": false,
                "internalType": "uint256",
                "name": "amount",
                "type": "uint256"
            }
        ],
        "name": "PaymentMade",
        "type": "event"
    },
    {
        "inputs": [],
        "name": "abort",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            },
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_tokenId",
                "type": "uint256"
            },
            {
                "internalType": "bytes",
                "name": "",
                "type": "bytes"
            }
        ],
        "name": "onERC721Received",
        "outputs": [
            {
                "internalType": "bytes4",
                "name": "",
                "type": "bytes4"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "paid",
        "outputs": [
            {
                "internalType": "bool",
                "name": "",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "pay",
        "outputs": [],
        "stateMutability": "payable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "price",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "tokenAdded",
        "outputs": [
            {
                "internalType": "bool",
                "name": "",
                "type": "bool"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "withdraw",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "withdrawFee",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    }
]
"""

let simplePaymentBytecode = """
6080604052604051610da0380380610da08339818101604052604081101561002657600080fd5b8101908080519060200190929190805190602001909291905050506000821161009a576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526023815260200180610d7d6023913960400191505060405180910390fd5b33600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555080600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550816004819055505050610c49806101346000396000f3fe60806040526004361061007b5760003560e01c80633ccfd60b1161004e5780633ccfd60b146102135780636d5e95b21461022a578063a035b1fe14610257578063e941fa78146102825761007b565b8063150b7a02146100805780631b9265b8146101c5578063295b4e17146101cf57806335a063b4146101fc575b600080fd5b34801561008c57600080fd5b50610190600480360360808110156100a357600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291908035906020019064010000000081111561010a57600080fd5b82018360208201111561011c57600080fd5b8035906020019184600183028401116401000000008311171561013e57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610299565b60405180827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916815260200191505060405180910390f35b6101cd610422565b005b3480156101db57600080fd5b506101e4610707565b60405180821515815260200191505060405180910390f35b34801561020857600080fd5b5061021161071a565b005b34801561021f57600080fd5b50610228610938565b005b34801561023657600080fd5b5061023f610a46565b60405180821515815260200191505060405180910390f35b34801561026357600080fd5b5061026c610a59565b6040518082815260200191505060405180910390f35b34801561028e57600080fd5b50610297610a5f565b005b60003273ffffffffffffffffffffffffffffffffffffffff16600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610341576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526039815260200180610b976039913960400191505060405180910390fd5b60001515600260149054906101000a900460ff161515146103ad576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526021815260200180610bf36021913960400191505060405180910390fd5b33600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550826000819055506001600260146101000a81548160ff02191690831515021790555063150b7a0260e01b9050949350505050565b60011515600260149054906101000a900460ff161515146104ab576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601d8152602001807f546f6b656e20686173206e6f74206265656e206164646564207965742e00000081525060200191505060405180910390fd5b6004543414610522576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004018080602001828103825260108152602001807f496e636f72726563742070726963652e0000000000000000000000000000000081525060200191505060405180910390fd5b60001515600760009054906101000a900460ff161515146105ab576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252600c8152602001807f416c72656164792070616964000000000000000000000000000000000000000081525060200191505060405180910390fd5b606460023402816105b857fe5b046006819055506006543403600581905550600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd30336000546040518463ffffffff1660e01b8152600401808473ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050600060405180830381600087803b15801561067d57600080fd5b505af1158015610691573d6000803e3d6000fd5b505050506001600760006101000a81548160ff0219169083151502179055507f3a2d0e41c506b136330c6e5e0295ccbf0966daece99bfe7c89020cc01dbfb8d63334604051808373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a1565b600760009054906101000a900460ff1681565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146107dd576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601a8152602001807f4f6e6c792073656c6c65722063616e2063616c6c20746869732e00000000000081525060200191505060405180910390fd5b60001515600760009054906101000a900460ff16151514610849576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526024815260200180610b736024913960400191505060405180910390fd5b600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd30600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166000546040518463ffffffff1660e01b8152600401808473ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050600060405180830381600087803b15801561091e57600080fd5b505af1158015610932573d6000803e3d6000fd5b50505050565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146109fb576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040180806020018281038252601a8152602001807f4f6e6c792073656c6c65722063616e2063616c6c20746869732e00000000000081525060200191505060405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff166108fc6005549081150290604051600060405180830381858888f19350505050158015610a43573d6000803e3d6000fd5b50565b600260149054906101000a900460ff1681565b60045481565b3373ffffffffffffffffffffffffffffffffffffffff16600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610b05576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526023815260200180610bd06023913960400191505060405180910390fd5b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc6006549081150290604051600060405180830381858888f19350505050158015610b6f573d6000803e3d6000fd5b5056fe546865206974656d2068617320616c7265616479206265656e207075726368617365642e4f6e6c79207468652073656c6c65722063616e207472616e736665722074686520746f6b656e20696e746f2074686520636f6e74726163742e4e6f7420617574686f72697a656420746f20776974686472617720746865206665652e54686520636f6e747261637420616c726561647920686173206120746f6b656e2ea2646970667358221220c5148c0bf8a30c992532a93bcebf65b8daad7db8ba3678dd018aec44d088579c64736f6c634300060c00335468652070726963652068617320746f2062652067726561746572207468616e20302e
"""
